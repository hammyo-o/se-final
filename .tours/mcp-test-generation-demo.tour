{
  "$schema": "https://aka.ms/codetour-schema",
  "title": "AI-Powered Test Coverage Improvement Demo",
  "steps": [
    {
      "file": "README.md",
      "description": "# Welcome to AI-Powered Test Coverage Improvement\n\n## Project Overview\n\nThis system demonstrates **intelligent automated test generation** for Apache Commons Lang3:\n\nâœ… **Automated JUnit 4 test generation** for low-coverage classes\nâœ… **Significant coverage improvements** through iterative testing\nâœ… **Complete automation**: Coverage analysis â†’ Test generation â†’ Git workflow\nâœ… **Production-ready**: Context-aware generation, proper JUnit 4 syntax, comprehensive assertions\n\n### Technology Stack\n- **MCP Server**: FastMCP with 10 intelligent tools\n- **Coverage**: JaCoCo 0.8.12 for detailed metrics\n- **AI Integration**: Context-aware test generation\n- **Version Control**: Automated Git commit/push workflow\n\nLet's explore how it works!",
      "line": 1
    },
    {
      "file": "README.md",
      "description": "## Project Structure\n\nKey components:\n- **`codebase/`** - Apache Commons Lang3 (our target for improvement)\n- **`mcp-agent/`** - MCP server with AI tools\n- **`testing-agent-demo/`** - Smaller demo project\n- **`scripts/`** - Coverage utilities\n- **`mcp-agent/docs/`** - Team reflection document\n\nThe MCP agent automates the entire test generation workflow.",
      "line": 208
    },
    {
      "file": "mcp-agent/server.py",
      "description": "## ðŸ§  MCP Server Architecture\n\n**FastMCP Server with 10 Intelligent Tools:**\n\n### Coverage Analysis (5 tools)\n- `analyze_coverage()` - Parse JaCoCo XML, identify targets (<90% coverage, >50 instructions)\n- `run_verify_with_coverage()` - Execute Maven verify with 5-min timeout\n- `run_tests()` - Quick test execution for verification\n- `identify_failing_tests()` - Parse surefire reports for debugging\n- `get_class_source()` - Retrieve source code for context-aware generation\n\n### Test Generation (1 tool)\n- `generate_junit4_tests()` - Create targeted JUnit 4 tests (basic/boundary/null_safety)\n\n### Git Automation (4 tools)\n- `git_status()`, `git_add_all()`, `git_commit()`, `git_push()`\n\n**Key Features:**\n- Portable paths (works from any directory)\n- Context-aware analysis before generation\n- JUnit 4 compatibility enforcement\n- Descriptive error messages",
      "line": 1
    },
    {
      "file": "codebase/pom.xml",
      "description": "## JaCoCo Configuration\n\nJaCoCo is configured in Maven to:\n- Run during the `verify` phase\n- Generate XML reports at `target/site/jacoco/jacoco.xml`\n- Create HTML reports for visualization\n- Track instruction and branch coverage\n\nThis is what powers our automated coverage measurement.",
      "line": 145,
      "pattern": "jacoco-maven-plugin"
    },
    {
      "file": "mcp-agent/coverage_parser.py",
      "description": "## ðŸ“Š JaCoCo Coverage Parser\n\n**Intelligent Analysis Tool:**\n\nParses `codebase/target/site/jacoco/jacoco.xml` to extract:\n- **Instruction Coverage** (bytecode-level granularity)\n- **Branch Coverage** (conditional logic paths)\n- **Line Coverage** (source code execution)\n- **Complexity Metrics** (cyclomatic complexity)\n\n**Selection Algorithm:**\n1. Filter: coverage < 90%\n2. Filter: instruction count > 50 (skip trivial classes)\n3. Sort: by instruction coverage (ascending)\n4. Return: Top 10 targets\n\n**Output Format:**\n```python\n{\n  \"class\": \"org.apache.commons.lang3.builder.StandardToStringStyle\",\n  \"instruction_coverage\": 32.0,\n  \"missed_instructions\": 102,\n  \"total_instructions\": 150\n}\n```\n\nThis context-aware analysis ensures effort is focused on high-impact targets, not already-tested code.",
      "line": 1
    },
    {
      "file": "codebase/src/test/java/org/apache/commons/lang3/builder/StandardToStringStyleExtendedTest.java",
      "description": "## âœ… Generated Test Example & Workflow\n\n**Example Test Generated by MCP Agent:**\n\n```java\n@Test\npublic void testUseClassNameGetterSetter() {\n    assertTrue(\"Default useClassName should be true\", style.isUseClassName());\n    style.setUseClassName(false);\n    assertFalse(\"useClassName should be false after setting\", style.isUseClassName());\n}\n```\n\n**Automated Workflow:**\n\n1. **Coverage Analysis** - Identify low-coverage classes (<90% coverage, >50 instructions)\n2. **Source Retrieval** - Fetch class source code for context\n3. **Test Generation** - Create targeted JUnit 4 tests (basic/boundary/null_safety)\n4. **Git Workflow** - Automated commit with descriptive messages\n5. **Verification** - Re-run Maven verify to measure impact\n\n**Example Commands:**\n```powershell\n@tester improve coverage for [ClassName]\n```\n\nThe system analyzes source code patterns and generates idiomatic tests that:\n- Follow JUnit 4 conventions\n- Include descriptive assertion messages\n- Cover edge cases (null, boundary, exceptions)\n- Mirror existing test patterns in the codebase\n\n**Key Insight:**\nContext-aware generation produces maintainable tests by understanding actual implementation details, not just signatures.",
      "line": 1
    }
  ],
  "ref": "chore/import-friend-merge"
}